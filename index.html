<html>
  <head>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <link
      rel="stylesheet"
      href="index.css"
    />
    <script>
      let currentQuestion = 0;
      let score = 0;
      let questions = [];

      function generateQuestions() {
        questions = [];
        for (let i = 0; i < 5; i++) {
          const num1 = Math.floor(Math.random() * 20) + 1;
          const num2 = Math.floor(Math.random() * 20) + 1;
          const operation = Math.random() < 0.5 ? "+" : "-";
          const correctAnswer = operation === "+" ? num1 + num2 : num1 - num2;
          
          // Generate multiple choice options
          const options = [correctAnswer];
          while (options.length < 4) {
            const wrongAnswer = correctAnswer + Math.floor(Math.random() * 10) - 5;
            if (wrongAnswer !== correctAnswer && !options.includes(wrongAnswer) && wrongAnswer > 0) {
              options.push(wrongAnswer);
            }
          }
          
          // Shuffle options
          for (let j = options.length - 1; j > 0; j--) {
            const k = Math.floor(Math.random() * (j + 1));
            [options[j], options[k]] = [options[k], options[j]];
          }
          
          questions.push({
            question: `${num1} ${operation} ${num2}`,
            answer: correctAnswer,
            options: options
          });
        }
      }

      function displayQuestion() {
        if (currentQuestion < questions.length) {
          document.getElementById("question").textContent = `Question ${
            currentQuestion + 1
          }: ${questions[currentQuestion].question} = ?`;
          
          // Display multiple choice options
          const optionsContainer = document.getElementById("options");
          optionsContainer.innerHTML = "";
          
          questions[currentQuestion].options.forEach((option, index) => {
            const button = document.createElement("button");
            button.textContent = option;
            button.className = "option-btn";
            button.onclick = () => checkAnswer(option);
            optionsContainer.appendChild(button);
          });
          
          document.getElementById("feedback").textContent = "";
        } else {
          showResults();
        }
      }

      function checkAnswer(selectedAnswer) {
        const correctAnswer = questions[currentQuestion].answer;
        
        // Disable all option buttons
        const optionButtons = document.querySelectorAll(".option-btn");
        optionButtons.forEach(btn => {
          btn.disabled = true;
          if (parseInt(btn.textContent) === correctAnswer) {
            btn.style.backgroundColor = "#28a745";
          } else if (parseInt(btn.textContent) === selectedAnswer && selectedAnswer !== correctAnswer) {
            btn.style.backgroundColor = "#dc3545";
          }
        });

        if (selectedAnswer === correctAnswer) {
          score++;
          document.getElementById("feedback").textContent = "Correct!";
          document.getElementById("feedback").style.color = "green";
        } else {
          document.getElementById(
            "feedback"
          ).textContent = `Wrong! The correct answer is ${correctAnswer}`;
          document.getElementById("feedback").style.color = "red";
        }

        currentQuestion++;
        setTimeout(displayQuestion, 1500);
      }

      function showResults() {
        const percentage = (score / questions.length) * 100;
        let message = `Quiz Complete! Your score: ${score}/${questions.length} (${percentage}%)`;

        if (percentage >= 80) {
          message += "\nüéâ Excellent! You're a math star!";
          document.getElementById("results").style.color = "green";
        } else if (percentage >= 60) {
          message += "\nüëç Good job! Keep practicing!";
          document.getElementById("results").style.color = "orange";
        } else {
          message += "\nüìö Keep studying! You can do better!";
          document.getElementById("results").style.color = "red";
        }

        document.getElementById("quiz-container").style.display = "none";
        document.getElementById("results").textContent = message;
        document.getElementById("restart-btn").style.display = "block";
      }

      function startQuiz() {
        currentQuestion = 0;
        score = 0;
        generateQuestions();
        document.getElementById("quiz-container").style.display = "block";
        document.getElementById("results").textContent = "";
        document.getElementById("restart-btn").style.display = "none";
        displayQuestion();
      }

      window.onload = function () {
        startQuiz();
      };
    </script>
  </head>
  <body>
    <h1>Math Quiz Challenge</h1>

    <div id="quiz-container">
      <h2 id="question"></h2>
      <div id="options"></div>
      <p id="feedback"></p>
    </div>

    <div id="results"></div>
    <button
      id="restart-btn"
      onclick="startQuiz()"
      style="display: none"
    >
      Start New Quiz
    </button>
  </body>
</html>
